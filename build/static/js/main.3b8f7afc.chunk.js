(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,c){},110:function(e,t,c){},112:function(e,t,c){},113:function(e,t,c){},135:function(e,t,c){},136:function(e,t,c){"use strict";c.r(t);var a=c(1),r=c.n(a),s=c(24),n=c.n(s),l=(c(82),c(83),c(6)),o=c.n(l),i=c(10),d=c(13),j=c(18),u=c(12),b=c(8),m=c.n(b),p=(c(104),c(0)),O=function(e){return Object(p.jsx)("div",{className:"errMsg",children:e})},h=function(e){return Object(p.jsx)("div",{className:"successMsg",children:e})};var x=function(){var e=Object(j.g)().activation_token,t=Object(a.useState)(""),c=Object(u.a)(t,2),r=c[0],s=c[1],n=Object(a.useState)(""),l=Object(u.a)(n,2),d=l[0],b=l[1];return Object(a.useEffect)((function(){e&&function(){var t=Object(i.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.post("/user/activation",{activation_token:e});case 3:c=t.sent,b(c.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response.data.msg&&s(t.t0.response.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),Object(p.jsxs)("div",{className:"active_page",children:[r&&O(r),d&&h(d)]})},f=c(15),v=c(3),g={LOGIN:"LOGIN",GET_TOKEN:"GET_TOKEN",GET_USER:"GET_USER",GET_ALL_USERS:"GET_ALL_USERS",GET_ITEMS:"GET_ITEMS",ADD_ITEM:"ADD_ITEM",DELETE_ITEM:"DELETE_ITEM",UPDATE_ITEM:"UPDATE_ITEM",ITEMS_LOADING:"ITEMS_LOADING",CART_LOADING:"CART_LOADING",GET_CART:"GET_CART",ADD_TO_CART:"ADD_TO_CART",DELETE_FROM_CART:"DELETE_FROM_CART",ORDERS_LOADING:"ORDERS_LOADING",GET_ORDERS:"GET_ORDERS",CHECKOUT:"CHECKOUT",GET_ERRORS:"GET_ERRORS",CLEAR_ERRORS:"CLEAR_ERRORS",CLEAR_CART:"CLEAR_CART"},N=function(){return{type:g.LOGIN}},y=function(){var e=Object(i.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"GET",headers:{Authorization:t,"Content-Type":"application/json"},credentials:"include",body:null},e.next=3,fetch("/user/infor",c).then((function(e){return e.json()}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=c(9),_=c.p+"static/media/e-com.11d85106.jpg",E={email:"",password:"",err:"",success:""};var k=function(){var e=Object(a.useState)(E),t=Object(u.a)(e,2),c=t[0],r=t[1],s=Object(w.b)(),n=Object(j.f)(),l=c.email,b=c.password,x=c.err,g=c.success,y=function(e){var t,a=e.target,s=a.name,n=a.value;r(Object(v.a)(Object(v.a)({},c),{},(t={},Object(f.a)(t,s,n),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))},k=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.a.post("/user/login",{email:l,password:b});case 4:a=e.sent,r(Object(v.a)(Object(v.a)({},c),{},{err:"",success:a.data.msg})),console.log(a),localStorage.setItem("firstlogin",!0),s(N()),n.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.response);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("section",{className:"vh-100",children:Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"row justify-content-center",children:Object(p.jsxs)("div",{className:"d-flex align-items-center ",children:[Object(p.jsxs)("div",{className:"col-12 col-md-6 text-black px-5 pt-5",children:[Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:k,style:{"max-width":"23rem"},children:[Object(p.jsx)("h3",{className:"fw-normal mb-5",children:"Login"}),x&&O(x),g&&h(g),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter email address",id:"email",value:l,name:"email",className:"form-control form-control-lg",onChange:y})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{type:"password",placeholder:"Enter password",id:"password",value:b,name:"password",className:"form-control form-control-lg",onChange:y})]}),Object(p.jsx)("div",{className:"pt-1 mb-4",children:Object(p.jsx)("button",{className:"btn btn-info btn-lg btn-block",type:"submit",children:"Login"})}),Object(p.jsx)("p",{className:"small mb-2 pb-lg-3 ",children:Object(p.jsx)(d.b,{to:"/forgot_password",children:"Forgot your password?"})})]})}),Object(p.jsxs)("p",{children:["New Customer?",Object(p.jsx)(d.b,{to:"/register",children:"Register here"})]})]}),Object(p.jsx)("div",{className:"col-md-6 px-0 d-none d-md-block",children:Object(p.jsx)("img",{src:_,alt:"Login",className:"w-100 vh-100 login_img"})})]})})})})})},C=function(e){return!e},T=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},A=function(e){return e.length<6},R=function(e,t){return e===t},S={name:"",email:"",password:"",cf_password:"",err:"",success:""};var I=function(){var e=Object(a.useState)(S),t=Object(u.a)(e,2),c=t[0],r=t[1],s=c.name,n=c.email,l=c.password,j=c.cf_password,b=c.err,x=c.success,g=function(e){var t,a=e.target,s=a.name,n=a.value;r(Object(v.a)(Object(v.a)({},c),{},(t={},Object(f.a)(t,s,n),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))},N=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!C(s)&&!C(l)){e.next=3;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Please fill in all fields.",success:""})));case 3:if(T(n)){e.next=5;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Invalid email.",success:""})));case 5:if(!A(l)){e.next=7;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Password must be at least 6 characters.",success:""})));case 7:if(R(l,j)){e.next=9;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Password did not match.",success:""})));case 9:return e.prev=9,e.next=12,m.a.post("/user/register",{name:s,email:n,password:l});case 12:a=e.sent,r(Object(v.a)(Object(v.a)({},c),{},{err:"",success:a.data.msg})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0.response.data.msg&&r(Object(v.a)(Object(v.a)({},c),{},{err:e.t0.response.data.msg,success:""}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"row justify-content-center",children:Object(p.jsx)("div",{className:"col-12 col-md-6 text-black px-5 pt-3",children:Object(p.jsxs)("form",{onSubmit:N,children:[Object(p.jsx)("h2",{className:"text-center pb-4",children:"Register"}),b&&O(b),x&&h(x),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter your name",id:"name",value:s,name:"name",className:"form-control form-control-lg",onChange:g})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email Address"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter email address",id:"email",value:n,name:"email",className:"form-control form-control-lg",onChange:g})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{type:"password",placeholder:"Enter password",id:"password",value:l,name:"password",className:"form-control form-control-lg",onChange:g})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"cf_password",children:"Confirm Password"}),Object(p.jsx)("input",{type:"password",placeholder:"Enter Confirm password",id:"cf_password",value:j,name:"cf_password",className:"form-control form-control-lg",onChange:g})]}),Object(p.jsx)("div",{className:"pt-1 mb-3",children:Object(p.jsx)("button",{className:"btn btn-info btn-lg btn-block",type:"submit",children:"Register"})}),Object(p.jsxs)("p",{children:["Already have an account?",Object(p.jsx)(d.b,{to:"/login",children:"Login"})]})]})})})})};var L=function(){return Object(p.jsx)("div",{children:"404 | Not Found"})},D={email:"",err:"",success:""};var F=function(){var e=Object(a.useState)(D),t=Object(u.a)(e,2),c=t[0],r=t[1],s=c.email,n=c.err,l=c.success,d=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T(s)){e.next=2;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Invalid email.",success:""})));case 2:return e.prev=2,e.next=5,m.a.post("/user/forgot",{email:s});case 5:return t=e.sent,e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"",success:t.data.msg})));case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.data.msg&&r(Object(v.a)(Object(v.a)({},c),{},{err:e.t0.response.data.msg,success:""}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"row justify-content-center pt-5",children:Object(p.jsxs)("div",{className:"col-10 col-md-5",children:[Object(p.jsx)("h2",{className:"text-center",children:"Forgot Your Password?"}),n&&O(n),l&&h(l),Object(p.jsxs)("div",{className:"pb-3 pt-4",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"email",children:"Enter your email address"}),Object(p.jsx)("input",{type:"email",name:"email",id:"email",value:s,className:"form-control form-control-lg",onChange:function(e){var t,a=e.target,s=a.name,n=a.value;r(Object(v.a)(Object(v.a)({},c),{},(t={},Object(f.a)(t,s,n),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))}})]}),Object(p.jsx)("button",{className:"btn btn-info btn-lg btn-block",onClick:d,children:"Verify your email"})]})})})},G={password:"",cf_password:"",err:"",success:""};var P=function(){var e=Object(a.useState)(G),t=Object(u.a)(e,2),c=t[0],r=t[1],s=Object(j.g)().token,n=c.password,l=c.cf_password,d=c.err,b=c.success,x=function(e){var t,a=e.target,s=a.name,n=a.value;r(Object(v.a)(Object(v.a)({},c),{},(t={},Object(f.a)(t,s,n),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))},g=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A(n)){e.next=2;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Password must be at least 6 characters.",success:""})));case 2:if(R(n,l)){e.next=4;break}return e.abrupt("return",r(Object(v.a)(Object(v.a)({},c),{},{err:"Password did not match.",success:""})));case 4:return e.prev=4,e.next=7,m.a.post("/user/reset",{password:n},{headers:{Authorization:s}});case 7:t=e.sent,r(Object(v.a)(Object(v.a)({},c),{},{err:"",success:t.data.msg})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),e.t0.response.data.msg&&r(Object(v.a)(Object(v.a)({},c),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"row justify-content-center pt-5",children:Object(p.jsxs)("div",{className:"col-10 col-md-5",children:[Object(p.jsx)("h2",{className:"text-center",children:"Reset Your Password"}),d&&O(d),b&&h(b),Object(p.jsxs)("div",{className:"pb-3 pt-4",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"password",children:"Password"}),Object(p.jsx)("input",{className:"form-control form-control-lg",type:"password",name:"password",id:"password",value:n,onChange:x})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"cf_password",children:"Confirm Password"}),Object(p.jsx)("input",{className:"form-control form-control-lg",type:"password",name:"cf_password",id:"cf_password",value:l,onChange:x})]}),Object(p.jsx)("div",{className:"pb-3",children:Object(p.jsx)("button",{className:"btn btn-info btn-lg btn-block",onClick:g,children:"Reset Password"})})]})})})},U=function(){var e=Object(i.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/user/all_infor",{headers:{Authorization:t}});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M={name:"",password:"",cf_password:"",err:"",success:""};var z=function(){var e=Object(w.c)((function(e){return e.auth})),t=Object(w.c)((function(e){return e.token})),c=Object(w.c)((function(e){return e.users})),r=e.user,s=e.isAdmin,n=Object(a.useState)(M),l=Object(u.a)(n,2),j=l[0],b=l[1],x=j.name,N=j.password,y=j.cf_password,_=j.err,E=j.success,k=Object(a.useState)(!1),C=Object(u.a)(k,2),T=C[0],S=C[1],I=Object(a.useState)(!1),L=Object(u.a)(I,2),D=L[0],F=L[1],G=Object(a.useState)(!1),P=Object(u.a)(G,2),z=P[0],B=P[1],H=Object(w.b)();Object(a.useEffect)((function(){s&&U(t).then((function(e){H(function(e){return{type:g.GET_ALL_USERS,payload:e.data}}(e))}))}),[t,s,H,z]);var q=function(e){var t,c=e.target,a=c.name,r=c.value;b(Object(v.a)(Object(v.a)({},j),{},(t={},Object(f.a)(t,a,r),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))},K=function(){var e=Object(i.a)(o.a.mark((function e(c){var a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,a=c.target.files[0]){e.next=5;break}return e.abrupt("return",b(Object(v.a)(Object(v.a)({},j),{},{err:"No files were uploaded.",success:""})));case 5:if(!(a.size>1048576)){e.next=7;break}return e.abrupt("return",b(Object(v.a)(Object(v.a)({},j),{},{err:"Size too large.",success:""})));case 7:if("image/jpeg"===a.type||"image/png"===a.type){e.next=9;break}return e.abrupt("return",b(Object(v.a)(Object(v.a)({},j),{},{err:"File format is incorrect.",success:""})));case 9:return(r=new FormData).append("file",a),F(!0),e.next=14,m.a.post("/api/upload_avatar",r,{headers:{"content-type":"multipart/form-data",Authorization:t}});case 14:s=e.sent,F(!1),S(s.data.url),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),b(Object(v.a)(Object(v.a)({},j),{},{err:e.t0.response.data.msg,success:""}));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(o.a.mark((function e(c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r._id===c){e.next=8;break}if(!window.confirm("Are you sure you want to delete this account?")){e.next=8;break}return F(!0),e.next=6,m.a.delete("/user/delete/".concat(c),{headers:{Authorization:t}});case 6:F(!1),B(!z);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(Object(v.a)(Object(v.a)({},j),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{children:[_&&O(_),E&&h(E),D&&Object(p.jsx)("h3",{children:"Loading....."})]}),Object(p.jsx)("div",{className:"container-fluid m-1",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-12 "+(s?"col-lg-4":"")+" d-flex justify-content-center ",children:Object(p.jsxs)("div",{className:"col-12 col-sm-6 "+(s?"col-lg-10":"col-lg-6"),children:[Object(p.jsx)("h2",{className:"text-center",children:s?"Admin Profile":"User Profile"}),Object(p.jsxs)("div",{className:"avatar mb-2",children:[Object(p.jsx)("img",{src:T||r.avatar,alt:"",style:{height:"150px",width:"150px"}}),Object(p.jsxs)("span",{children:[Object(p.jsxs)("p",{children:["Profile Image Change ",Object(p.jsx)("i",{className:"fas fa-camera"})]}),Object(p.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:K,className:"form-control form-control-lg"})]})]}),Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",name:"name",id:"name",defaultValue:r.name,placeholder:"Your name",onChange:q,className:"form-control form-control-lg"})]}),Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{type:"email",name:"email",id:"email",defaultValue:r.email,placeholder:"Your email address",disabled:!0,className:"form-control form-control-lg"})]}),Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"password",children:"New Password"}),Object(p.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Your password",value:N,onChange:q,className:"form-control form-control-lg"})]}),Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"cf_password",children:"Confirm New Password"}),Object(p.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",placeholder:"Confirm password",value:y,onChange:q,className:"form-control form-control-lg"})]}),Object(p.jsx)("div",{className:"mb-2",children:Object(p.jsx)("em",{style:{color:"crimson"},children:"* If you update your password here, you will not be able to login quickly using google and facebook."})}),Object(p.jsx)("button",{onClick:function(){(x||T)&&function(){try{m.a.patch("/user/update",{name:x||r.name,avatar:T||r.avatar},{headers:{Authorization:t}}),b(Object(v.a)(Object(v.a)({},j),{},{err:"",success:"Updated Success!"}))}catch(_){b(Object(v.a)(Object(v.a)({},j),{},{err:_.response.data.msg,success:""}))}}(),N&&function(){if(A(N))return b(Object(v.a)(Object(v.a)({},j),{},{err:"Password must be at least 6 characters.",success:""}));if(!R(N,y))return b(Object(v.a)(Object(v.a)({},j),{},{err:"Password did not match.",success:""}));try{m.a.post("/user/reset",{password:N},{headers:{Authorization:t}}),b(Object(v.a)(Object(v.a)({},j),{},{err:"",success:"Updated Success!"}))}catch(_){b(Object(v.a)(Object(v.a)({},j),{},{err:_.response.data.msg,success:""}))}}()},className:"btn btn-info btn-lg btn-block mb-3",disabled:D,children:"Update"})]})}),s?Object(p.jsxs)("div",{className:"col-12 col-lg-8 text-center ",children:[Object(p.jsx)("h2",{children:"Users"}),Object(p.jsx)("div",{style:{overflowX:"auto"},children:Object(p.jsxs)("table",{className:"customers",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"ID"}),Object(p.jsx)("th",{children:"Name"}),Object(p.jsx)("th",{children:"Email"}),Object(p.jsx)("th",{children:"Admin"}),Object(p.jsx)("th",{children:"Action"})]})}),Object(p.jsx)("tbody",{children:c.map((function(e){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e._id}),Object(p.jsx)("td",{children:e.name}),Object(p.jsx)("td",{children:e.email}),Object(p.jsx)("td",{children:e.role?Object(p.jsx)("i",{className:"fas fa-check",title:"Admin"}):Object(p.jsx)("i",{className:"fas fa-times",title:"User"})}),Object(p.jsxs)("td",{children:[Object(p.jsx)(d.b,{to:"/edit_user/".concat(e._id),children:Object(p.jsx)("i",{className:"fas fa-edit",title:"Edit"})}),Object(p.jsx)("i",{className:"fas fa-trash-alt",title:"Remove",onClick:function(){return V(e._id)}})]})]},e._id)}))})]})})]}):null]})})]})};var B=function(){var e=Object(j.g)().id,t=Object(j.f)(),c=Object(a.useState)([]),r=Object(u.a)(c,2),s=r[0],n=r[1],l=Object(w.c)((function(e){return e.users})),d=Object(w.c)((function(e){return e.token})),b=Object(a.useState)(!1),x=Object(u.a)(b,2),f=x[0],v=x[1],g=Object(a.useState)(!1),N=Object(u.a)(g,2),y=N[0],_=N[1],E=Object(a.useState)(!1),k=Object(u.a)(E,2),C=k[0],T=k[1],A=Object(a.useState)(0),R=Object(u.a)(A,2),S=R[0],I=R[1];Object(a.useEffect)((function(){0!==l.length?l.forEach((function(t){t._id===e&&(n(t),v(t.role))})):t.push("/profile")}),[l,e,t]);var L=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S%2===0){e.next=7;break}return e.next=4,m.a.patch("/user/update_role/".concat(s._id),{role:f},{headers:{Authorization:d}});case 4:t=e.sent,T(t.data.msg),I(0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&_(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"profile_page edit_user",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("button",{onClick:function(){return t.goBack()},className:"go_back",children:[Object(p.jsx)("i",{className:"fas fa-long-arrow-alt-left"})," Go Back"]})}),Object(p.jsxs)("div",{className:"col-left",children:[Object(p.jsx)("h2",{children:"Edit User"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"name",children:"Name"}),Object(p.jsx)("input",{type:"text",name:"name",defaultValue:s.name,disabled:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email"}),Object(p.jsx)("input",{type:"email",name:"email",defaultValue:s.email,disabled:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("input",{type:"checkbox",id:"isAdmin",checked:f,onChange:function(){T(""),_(""),v(!f),I(S+1)}}),Object(p.jsx)("label",{htmlFor:"isAdmin",children:"isAdmin"})]}),Object(p.jsx)("button",{onClick:L,children:"Update"}),y&&O(y),C&&h(C)]})]})},H=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:g.GET_ERRORS,payload:{msg:e,status:t,id:c}}},q=function(e){return{type:g.GET_ITEMS,payload:e.data}},K=function(e){return{type:g.ADD_ITEM,payload:e.data}},V=function(e){return{type:g.DELETE_ITEM,payload:e}},X=function(){return{type:g.ITEMS_LOADING}},Y=c(137),J=c(138),Q=c(139),W=c(140),Z=c(141),$=c(75),ee=c(142),te=(c(60),function(e){return{type:g.GET_CART,payload:e.data}}),ce=function(e){return{type:g.ADD_TO_CART,payload:e.data}},ae=function(e){return{type:g.DELETE_FROM_CART,payload:e.data}};var re=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(""),n=Object(u.a)(s,2),l=n[0],j=n[1],b=Object(w.b)(),O=Object(w.c)((function(e){return e.item})),h=Object(w.c)((function(e){return e.auth}));Object(a.useEffect)((function(){O.items.length>0&&r(O.items.filter((function(e){return e.title.toLowerCase().includes(l.toLowerCase())})))}),[l,O.items]);var x=function(){var e=Object(i.a)(o.a.mark((function e(t,c,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/api/cart/".concat(t),{productId:c,quantity:a});case 3:return r=e.sent,b(ce(r)),e.abrupt("return",alert("Item added to Cart"));case 8:return e.prev=8,e.t0=e.catch(0),console.log("ProductDetail AddToCart err: "),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("/api/items/".concat(t));case 3:e.sent,b(V(t)),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),b(H(e.t0.response.data,e.t0.response.status)),console.log("onDeleteItem Error: "),e.abrupt("return",console.log(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container-fluid",children:O.loading?Object(p.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"87vh"},children:Object(p.jsx)(ee.a,{color:"dark"})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"row pt-5 d-flex justify-content-center",children:[Object(p.jsx)("div",{className:"col-10 col-md-6",children:Object(p.jsx)("input",{type:"text",placeholder:"Search",onChange:function(e){return j(e.target.value)},className:"form-control form-control-lg"})}),h.isAdmin?Object(p.jsx)("div",{className:"row m-3 text-center",children:Object(p.jsx)("div",{className:"col-12",children:Object(p.jsx)($.a,{color:"danger",size:"sm",className:"gpk-btn ",children:Object(p.jsx)(d.b,{to:"/shop/items/add_item",className:"gpk-link",children:"Add Product"})})})}):null]}),Object(p.jsx)("div",{className:"row pt-5 d-flex justify-content-center",children:c.map((function(e){return Object(p.jsx)("div",{className:"col-12 col-md-4 ",children:Object(p.jsx)(Y.a,{className:"mb-4 gpk-product-scale gpk-product-minHeight",children:Object(p.jsxs)(J.a,{children:[Object(p.jsxs)(d.b,{to:"/shop/item_details/".concat(e._id),className:"text-dark text-decoration-none",children:[Object(p.jsx)("div",{className:"d-flex justify-content-center",children:Object(p.jsx)("img",{className:"w-75",src:e.img,alt:"Product"})}),Object(p.jsx)(Q.a,{tag:"h5",children:e.title}),Object(p.jsxs)(W.a,{tag:"h6",children:["category:",e.category]})]}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col",children:Object(p.jsxs)(Z.a,{tag:"h4",children:["\u20b9 ",e.price]})})}),Object(p.jsxs)(Z.a,{className:"mt-2",children:[h.isLogged?Object(p.jsx)($.a,{color:"info",size:"sm",className:"gpk-btn m-1",onClick:function(){x(h.user._id,e._id,1)},children:"Add To Cart"}):null,h.isAdmin?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.b,{to:"/shop/edit_item/".concat(e._id),className:"text-decoration-none",children:Object(p.jsx)($.a,{color:"warning",size:"sm",className:"gpk-btn m-1",children:"Edit Product"})}),Object(p.jsx)($.a,{color:"danger",size:"sm",className:"gpk-btn m-1",onClick:function(){f(e._id)},children:"Delete Product"})]}):null]})]})})},e._id)}))})]})})};c(110);var se=function(){var e=Object(w.c)((function(e){return e.cart})),t=Object(w.c)((function(e){return e.auth})),c=Object(a.useState)(!1),r=Object(u.a)(c,2),s=r[0],n=r[1],l=Object(w.b)(),b=Object(j.f)(),O=function(){var c=function(){var e=Object(i.a)(o.a.mark((function e(){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=t.user._id,e.next=4,m.a.get("/api/cart/".concat(c));case 4:a=e.sent,l(te(a)),n(void 0===c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);try{l(H(e.t0.response.data,e.t0.response.status))}catch(r){console.log("Cart-page-getCartCall-err: "+r)}case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();s||void 0!==t.user._id&&null===e.cart&&(l({type:g.CART_LOADING}),c())};Object(a.useEffect)((function(){O()}),[t.isLogged,s]);var h={width:"125px",borderRadius:"100%"},x=function(){var e=Object(i.a)(o.a.mark((function e(t,c){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("/api/cart/".concat(t,"/").concat(c));case 3:return a=e.sent,l(ae(a)),e.abrupt("return",alert("Item deleted from cart"));case 8:e.prev=8,e.t0=e.catch(0);try{l(H(e.t0.response.data,e.t0.response.status))}catch(r){console.log(r)}return e.abrupt("return",alert("something went wrong.."));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"Container ",children:[Object(p.jsx)("h1",{className:"text-center",children:"Cart "}),e.loading?Object(p.jsxs)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"87vh"},children:[Object(p.jsx)(ee.a,{color:"dark"}),Object(p.jsx)("h1",{children:"Loading..."})]}):Object(p.jsxs)("div",{className:"m-3 ",children:[null!==e.cart&&""!==e.cart?e.cart.items.map((function(e){return Object(p.jsx)("div",{className:"row m-1",children:Object(p.jsxs)(Y.a,{className:"mb-4 gpk-product-scale py-3",children:[Object(p.jsx)("div",{className:"col px-2",children:Object(p.jsx)("div",{className:"text-end",children:Object(p.jsx)($.a,{className:"btn-danger",onClick:function(){x(t.user._id,e.productId)},children:Object(p.jsx)("i",{className:"fas fa-times"})})})}),Object(p.jsx)("div",{className:"col-11",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)(d.b,{to:"/shop/item_details/".concat(e.productId),className:"text-dark text-decoration-none \r d-flex flex-column flex-sm-row align-items-center \r text-center",children:[Object(p.jsx)("div",{className:"col-12 col-sm-3",children:Object(p.jsx)("img",{src:e.img,alt:"product_img",style:h})}),Object(p.jsx)("div",{className:"col-12 col-sm-5",children:Object(p.jsx)("h5",{children:e.name})}),Object(p.jsx)("div",{className:"col-12 col-sm-2",children:Object(p.jsxs)("h6",{children:["Quantity:",e.quantity]})}),Object(p.jsx)("div",{className:"col-12 col-sm-2",children:Object(p.jsxs)("h4",{children:["Rs. ",e.price]})})]})})})]})},e.productId)})):null,""!==e.cart?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("h1",{className:"text-end",children:["Total Bill: ",e.cart?e.cart.bill:0]}),Object(p.jsx)("div",{className:"d-flex justify-content-end",children:Object(p.jsx)($.a,{onClick:function(){return b.push("/checkout")},children:"Checkout"})})]}):Object(p.jsx)("h1",{className:"text-center text-info",children:"Empty"})]})]})},ne=function(e){return{type:g.GET_ORDERS,payload:e.data}},le=c(35),oe=c.n(le);var ie=function(){var e=Object(w.c)((function(e){return e.order})),t=Object(w.c)((function(e){return e.auth})),c=Object(a.useState)(!1),r=Object(u.a)(c,2),s=r[0],n=r[1],l=Object(w.b)(),b=Object(j.f)(),O=function(){var c=function(){var e=Object(i.a)(o.a.mark((function e(){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=t.user._id,e.next=4,m.a.get("/api/order/".concat(c));case 4:a=e.sent,l(ne(a)),n(void 0===c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);try{l(H(e.t0.response.data,e.t0.response.status))}catch(r){console.log("Cart-page-getCartCall-err: "+r)}case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();s||void 0!==t.user._id&&0===e.orders.length&&(l({type:g.ORDERS_LOADING}),c())};Object(a.useEffect)((function(){O()}),[t.isLogged,s]);var h={width:"125px",borderRadius:"100%"};return Object(p.jsxs)("div",{className:"Container ",children:[Object(p.jsx)("h1",{className:"text-center",children:"My Orders "}),e.loading?Object(p.jsxs)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"87vh"},children:[Object(p.jsx)(ee.a,{color:"dark"}),Object(p.jsx)("h1",{children:"Loading..."})]}):Object(p.jsx)("div",{className:"m-3 ",children:null!==e.orders&&0!==e.orders.length?e.orders.map((function(e){return Object(p.jsx)("div",{className:"row m-1",children:Object(p.jsxs)(Y.a,{className:"mb-4 py-3",children:[Object(p.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("h6",{children:["Order Id: ",e._id]}),Object(p.jsxs)("h6",{children:["Ordered: ",oe()(e.date_added).format("LLL")]})]}),e.paid?Object(p.jsx)($.a,{className:"btn btn-info mb-2 ",onClick:function(){return b.push("/order/recipt/".concat(e._id))},children:"Recipt"}):Object(p.jsx)("h6",{className:"text-danger",children:" Payment Failed"})]}),Object(p.jsxs)("div",{className:"col-12",children:[e.items.map((function(e){return Object(p.jsx)(Y.a,{className:"mb-4 gpk-product-scale py-3",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)(d.b,{to:"/shop/item_details/".concat(e.productId),className:"text-dark text-decoration-none \r d-flex flex-column flex-sm-row align-items-center \r text-center",children:[Object(p.jsx)("div",{className:"col-12 col-sm-3",children:Object(p.jsx)("img",{src:e.img,alt:"product_img",style:h})}),Object(p.jsx)("div",{className:"col-12 col-sm-5",children:Object(p.jsx)("h5",{children:e.name})}),Object(p.jsx)("div",{className:"col-12 col-sm-2",children:Object(p.jsxs)("h6",{children:["Quantity:",e.quantity]})}),Object(p.jsx)("div",{className:"col-12 col-sm-2",children:Object(p.jsxs)("h4",{children:["Rs. ",e.price]})})]})})},e.productId)})),Object(p.jsxs)("h3",{className:"text-end",children:["Total: ",e.bill]})]})]})},e._id)})):Object(p.jsx)("div",{className:"text-center text-info",children:Object(p.jsx)("h1",{children:"Empty"})})})]})},de=c(143),je=c(144);c(112);var ue=function(){return Object(p.jsx)("div",{className:"home",children:Object(p.jsx)(de.a,{children:Object(p.jsxs)(je.a,{className:"text-center p-5",children:[Object(p.jsx)("h1",{children:"Welcome to FlyBuy "}),Object(p.jsx)("h4",{children:"Click Here to Shop"}),Object(p.jsx)("h2",{children:Object(p.jsx)(d.b,{to:"/shop",children:Object(p.jsx)("i",{className:"fas fa-store-alt icon"})})})]})})})},be={title:"",description:"",category:"",price:"",img:"",err:"",success:""};var me=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),c=t[0],r=t[1],s=Object(a.useState)(!1),n=Object(u.a)(s,2),l=n[0],d=n[1],b=Object(a.useState)(be),x=Object(u.a)(b,2),g=x[0],N=x[1],y=Object(w.c)((function(e){return e.token})),_=Object(w.b)(),E=(Object(j.f)(),function(){var e=Object(i.a)(o.a.mark((function e(t){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,a=t.target.files[0]){e.next=5;break}return e.abrupt("return",N(Object(v.a)(Object(v.a)({},g),{},{err:"No files were uploaded.",success:""})));case 5:if(!(a.size>1048576)){e.next=7;break}return e.abrupt("return",N(Object(v.a)(Object(v.a)({},g),{},{err:"Size too large.",success:""})));case 7:if("image/jpeg"===a.type||"image/png"===a.type){e.next=9;break}return e.abrupt("return",N(Object(v.a)(Object(v.a)({},g),{},{err:"File format is incorrect.",success:""})));case 9:return(s=new FormData).append("file",a),d(!0),e.next=14,m.a.post("/api/upload_avatar",s,{headers:{"content-type":"multipart/form-data",Authorization:y}});case 14:n=e.sent,d(!1),r(n.data.url),N(Object(v.a)(Object(v.a)({},g),{},{img:c})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),N(Object(v.a)(Object(v.a)({},g),{},{err:e.t0.response.data.msg,success:""}));case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}()),k=function(e){var t,c=e.target,a=c.name,r=c.value;N(Object(v.a)(Object(v.a)({},g),{},(t={},Object(f.a)(t,a,r),Object(f.a)(t,"err",""),Object(f.a)(t,"success",""),t)))},C=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,r,s,n,l,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a=g.title,r=g.description,s=g.category,n=g.price,l=c,console.log("submit data:"),console.log(a,r,s,n,l),e.next=8,m.a.post("/api/items",{title:a,description:r,category:s,price:n,img:l});case 8:i=e.sent,_(K(i)),N(Object(v.a)(Object(v.a)({},g),{},{err:"",success:"Item Added Successfully"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),g.err&&N(Object(v.a)(Object(v.a)({},g),{},{err:e.t0.response.data.msg,success:""}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return console.log(g),Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"row d-flex justify-content-center mt-5",children:[Object(p.jsx)("h2",{className:"text-center",children:"Add Item"}),Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[g.err&&O(g.err),g.success&&h(g.success),Object(p.jsxs)("div",{className:"ItemImg d-flex justify-content-center",children:[!g.err&&!g.success&&l&&Object(p.jsx)(ee.a,{color:"dark"}),Object(p.jsx)("img",{src:c||null,alt:"",style:{"max-height":"250px"}})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"file",children:"Product Image"}),Object(p.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:E,className:"btn btn-sm"})]}),Object(p.jsxs)("form",{onSubmit:C,children:[Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"title",children:"Title"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter product title",id:"title",value:g.title,name:"title",className:"form-control form-control-lg",onChange:k})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"description",children:"Description"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter product description",id:"description",value:g.description,name:"description",className:"form-control form-control-lg",onChange:k})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"category",children:"Category"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter product category",id:"category",value:g.category,name:"category",className:"form-control form-control-lg",onChange:k})]}),Object(p.jsxs)("div",{className:"pb-3",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"price",children:"Price(\u20b9)"}),Object(p.jsx)("input",{type:"text",placeholder:"Enter product price",id:"price",value:g.price,name:"price",className:"form-control form-control-lg",onChange:k})]}),Object(p.jsx)("div",{className:"pt-1 mb-4",children:Object(p.jsx)("button",{className:"btn btn-info btn-lg btn-block",type:"submit",children:"Add "})})]})]})]})})};var pe=function(){return Object(p.jsx)("div",{children:"EditItem"})};var Oe=function(){return Object(p.jsx)("div",{children:"Delete Item"})};var he=function(){var e=Object(j.g)().id,t=Object(j.f)(),c=Object(w.b)(),r=Object(w.c)((function(e){return e.item})),s=Object(w.c)((function(e){return e.auth})),n=r.items.filter((function(t){return t._id===e?t:null}))[0],l=function(){var e=Object(i.a)(o.a.mark((function e(t,a,r){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("AddToCart clicked"),e.prev=1,e.next=4,m.a.post("/api/cart/".concat(t),{productId:a,quantity:r});case 4:return s=e.sent,c(ce(s)),e.abrupt("return",alert("Item added to Cart"));case 9:return e.prev=9,e.t0=e.catch(1),console.log("ProductDetail AddToCart err: "),e.abrupt("return",console.log(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,c,a){return e.apply(this,arguments)}}(),d={"max-height":"250px"};return Object(a.useEffect)((function(){!function(){try{console.log("items api request"),c(X()),function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/items");case 2:t=e.sent,c(q(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}catch(e){try{c(H(e.response.data,e.response.status))}catch(t){console.log("ProductDetail-page:item call-: "+t)}}}()}),[!s.isLogged]),Object(p.jsxs)("div",{className:"container mb-5",children:[Object(p.jsx)("div",{className:"d-flex justify-content-start",children:Object(p.jsxs)("button",{onClick:function(){return t.goBack()},className:"go_back",children:[Object(p.jsx)("i",{className:"fas fa-long-arrow-alt-left"})," Go Back"]})}),void 0!==n&&null!==n?Object(p.jsxs)(je.a,{children:[Object(p.jsx)("h1",{className:"text-center solid mb-5",children:"Product Details"}),Object(p.jsx)("div",{className:"col-12 col-md-4 d-flex justify-content-center mb-4",children:Object(p.jsx)("img",{src:n.img,alt:"product img",style:d})}),Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[Object(p.jsx)("h2",{children:n.title}),Object(p.jsxs)("p",{children:["category: ",n.category]}),Object(p.jsxs)("h5",{className:"my-3",children:["Product Id: ",n._id]}),Object(p.jsxs)("h2",{children:["\u20b9",n.price]}),Object(p.jsx)("h5",{className:"text-secondary mt-3",children:"Description"}),Object(p.jsx)("p",{children:n.description}),s.isLogged?Object(p.jsx)($.a,{color:"info",size:"sm",className:"gpk-btn",onClick:function(){return l(s.user._id,n._id,1)},children:"Add To Cart"}):null]})]}):Object(p.jsx)("h1",{className:"text-center",children:"Item Not Found"})]})},xe={address:"",mobileNo:""};var fe=function(){var e=Object(w.c)((function(e){return e.cart})),t=Object(w.c)((function(e){return e.auth})),c=Object(j.f)(),r=Object(w.b)(),s=t.user._id,n=Object(a.useState)(xe),l=Object(u.a)(n,2),d=l[0],b=l[1],O=d.address,h=d.mobileNo,x=function(e){var t=e.target,c=t.name,a=t.value;b(Object(v.a)(Object(v.a)({},d),{},Object(f.a)({},c,a)))},N=function(){var t=Object(i.a)(o.a.mark((function t(){var a,n,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/api/order/".concat(s),t.next=3,m.a.post(a,{address:O,mobileNo:h});case 3:n=t.sent,l=n.data,console.log("App -> razorPayPaymentHandler -> data",l),d={key:"",name:"FlyBuy",description:"Thank you for shopping.",order_id:l.id,handler:function(){var t=Object(i.a)(o.a.mark((function t(a){var n,d,j,u,b,O,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.razorpay_payment_id,d="/api/order/capture/".concat(n),j=e.cart?e.cart.bill:0,t.next=6,m.a.post(d,{amount:j});case 6:if(u=t.sent,console.log(u),b=JSON.parse(u.data),O=b.captured,console.log("App -> razorPayPaymentHandler -> captured",b),!O){t.next=20;break}return console.log("success"),h="/api/order/success/".concat(l.id),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(h,{userId:s});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("success error : "),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()(),r({type:g.CLEAR_CART}),t.abrupt("return",c.push("/orders"));case 20:return console.log("failure"),t.abrupt("return",c.push("/orders"));case 22:t.next=29;break;case 24:return t.prev=24,t.t0=t.catch(0),console.log("handler error: "),console.log(t.t0),t.abrupt("return",Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Something went wrong "})}));case 29:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}(),theme:{color:"#686CFD"}},new window.Razorpay(d).open();case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-12 col-md-6",children:[Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"address",children:"Address"}),Object(p.jsx)("input",{type:"text",name:"address",id:"address",value:O,placeholder:"Enter delivery address",onChange:x,className:"form-control form-control-lg"})]}),Object(p.jsxs)("div",{className:"form-group mb-2",children:[Object(p.jsx)("label",{className:"form-label",htmlFor:"mobileNo",children:"Mobile Number"}),Object(p.jsx)("input",{type:"tel",name:"mobileNo",pattern:"[0-9]{10}",id:"mobileNo",value:h,placeholder:"Enter Mobile Number",onChange:x,className:"form-control form-control-lg"})]})]})}),Object(p.jsx)($.a,{onClick:function(){return N()},children:"Proceed"})]})};c(113);var ve=function(){var e=Object(w.c)((function(e){return e.order})),t=Object(w.c)((function(e){return e.auth})),c=Object(j.g)().id,r=Object(a.useState)(),s=Object(u.a)(r,2),n=s[0],l=s[1],o=Object(j.f)();console.log(c);var i=function(){var e=1;return n.items.map((function(t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:e++}),Object(p.jsx)("td",{children:t.name}),Object(p.jsx)("td",{children:t.quantity}),Object(p.jsx)("td",{children:t.price}),Object(p.jsx)("td",{children:t.quantity*t.price})]},t.productId)}))};return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"d-flex justify-content-start",children:Object(p.jsxs)("button",{onClick:function(){return o.goBack()},className:"go_back",children:[Object(p.jsx)("i",{className:"fas fa-long-arrow-alt-left"})," Go Back"]})}),Object(p.jsx)("h1",{className:"text-center",children:"Recipt"}),Object(p.jsxs)("div",{className:"row",children:[(e.orders&&void 0===n&&e.orders.map((function(e){if(e._id===c)return l(e)})),void console.log(n)),void 0===n?Object(p.jsxs)("div",{children:[Object(p.jsx)("hr",{}),Object(p.jsx)("h1",{className:"text-center text-danger",children:"Invalid Order Id"})]}):Object(p.jsxs)("div",{className:"card p-3",children:[Object(p.jsxs)("div",{className:"printme",children:[Object(p.jsx)("div",{className:"d-flex justify-content-end",children:Object(p.jsxs)("button",{onClick:function(){window.print()},className:"btn btn-info",children:[Object(p.jsx)("i",{className:"fa fa-print"}),"Print"]})}),Object(p.jsx)("hr",{})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("h3",{style:{color:"#0d6efd"},children:"FlyBuy"}),Object(p.jsxs)("h6",{className:"text-end",children:["Order Id: ",n._id]})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("p",{children:"To:"}),Object(p.jsx)("h5",{children:t.user.name.toUpperCase()}),Object(p.jsx)("p",{children:n.address?n.address:null}),Object(p.jsxs)("p",{children:["Email: ",t.user.email]}),Object(p.jsx)("p",{children:n.mobileNo?"Phone: +91 "+n.mobileNo:null}),Object(p.jsxs)("p",{children:[" Ordered: ",oe()(n.date_added).format("LLL")]}),Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{className:"thead-dark",children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"Item"}),Object(p.jsx)("th",{scope:"col",children:"Qty"}),Object(p.jsx)("th",{scope:"col",children:"Price"}),Object(p.jsx)("th",{scope:"col",children:"Total"})]})}),Object(p.jsx)("tbody",{children:i()})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(p.jsx)("strong",{className:"px-2",children:"Subtotal: "}),Object(p.jsx)("strong",{children:n.bill})]})]})]})]})};var ge=function(){var e=Object(w.c)((function(e){return e.auth})),t=e.isLogged,c=e.isAdmin;return Object(p.jsx)("section",{children:Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{exact:!0,path:"/",component:ue}),Object(p.jsx)(j.a,{exact:!0,path:"/login",component:t?L:k}),Object(p.jsx)(j.a,{exact:!0,path:"/register",component:t?L:I}),Object(p.jsx)(j.a,{exact:!0,path:"/forgot_password",component:t?L:F}),Object(p.jsx)(j.a,{exact:!0,path:"/user/reset/:token",component:t?L:P}),Object(p.jsx)(j.a,{exact:!0,path:"/user/activate/:activation_token",component:x}),Object(p.jsx)(j.a,{exact:!0,path:"/profile",component:t?z:L}),Object(p.jsx)(j.a,{exact:!0,path:"/edit_user/:id",component:c?B:L}),Object(p.jsx)(j.a,{exact:!0,path:"/shop",component:re}),Object(p.jsx)(j.a,{exact:!0,path:"/shop/item_details/:id",component:he}),Object(p.jsx)(j.a,{exact:!0,path:"/cart",component:t?se:L}),Object(p.jsx)(j.a,{exact:!0,path:"/orders",component:t?ie:L}),Object(p.jsx)(j.a,{exact:!0,path:"/checkout",component:t?fe:L}),Object(p.jsx)(j.a,{exact:!0,path:"/order/recipt/:id",component:t?ve:L}),Object(p.jsx)(j.a,{exact:!0,path:"/shop/items/add_item",component:c?me:L}),Object(p.jsx)(j.a,{exact:!0,path:"/shop/edit_item/:id",component:c?pe:L}),Object(p.jsx)(j.a,{exact:!0,path:"/shop/delete_item/:id",component:c?Oe:L}),Object(p.jsx)(j.a,{component:L})]})})},Ne=c(145),ye=c(151),we=c(152),_e=c(153),Ee=c(146),ke=c(147),Ce=c(148),Te=c(149),Ae=c(150);var Re=function(){var e=Object(w.c)((function(e){return e.auth})),t=e.user,c=e.isLogged,r=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/user/logout");case 3:localStorage.removeItem("firstlogin"),window.location.href="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=Object(a.useState)(!1),n=Object(u.a)(s,2),l=n[0],j=n[1],b=c&&t.name?t.name.length:0;return Object(p.jsx)("header",{children:Object(p.jsx)(ke.a,{color:"light",style:{fontWeight:"700"},light:!0,expand:"sm",children:Object(p.jsxs)(de.a,{children:[Object(p.jsx)(d.c,{className:"NavbarBrand",to:"/",children:"FlyBuy"}),Object(p.jsx)(Ce.a,{onClick:function(){j(!l)}}),Object(p.jsx)(Te.a,{isOpen:l,className:"justify-content-end",navbar:!0,children:Object(p.jsxs)(Ae.a,{className:"ml-auto align-items-"+(l?"start":"center"),navbar:!0,children:[Object(p.jsx)(Ne.a,{children:Object(p.jsx)(d.c,{exact:!0,className:"nav-link gpk-Underline",to:"/",children:"Home"})}),Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(d.b,{className:"nav-link gpk-Underline ",to:"/shop",children:[Object(p.jsx)("span",{className:"fas fa-store p"}),"Shop"]})}),c?Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(d.b,{to:"/cart",className:"nav-link gpk-Underline",children:[Object(p.jsx)("span",{className:"fas fa-shopping-cart"})," Cart"]})}),Object(p.jsx)(Ne.a,{children:Object(p.jsx)(d.b,{to:"/orders",className:"nav-link gpk-Underline",children:"Orders"})}),Object(p.jsxs)(ye.a,{setActiveFromChild:!0,children:[Object(p.jsx)(we.a,{tag:"div",children:Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(d.b,{to:"#",className:"nav-link avatar",children:[Object(p.jsx)("img",{src:t.avatar,alt:""})," ",b>7?t.name.slice(0,7):t.name," ",Object(p.jsx)("i",{className:"fas fa-angle-down"})]})})}),Object(p.jsxs)(_e.a,{children:[Object(p.jsx)(Ee.a,{children:Object(p.jsx)(Ne.a,{children:Object(p.jsx)(d.b,{to:"/profile",className:"nav-link",children:"Profile"})})}),Object(p.jsx)(Ee.a,{divider:!0}),Object(p.jsx)(Ee.a,{children:Object(p.jsx)(Ne.a,{children:Object(p.jsx)(d.b,{to:"/",className:"nav-link",onClick:r,children:"Logout"})})})]})]})]}):Object(p.jsx)(Ne.a,{children:Object(p.jsxs)(d.b,{to:"/login",className:"nav-link gpk-Underline",children:[Object(p.jsx)("i",{className:"fas fa-user"})," Sign in"]})})]})})]})})})};c(135);var Se=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.token})),c=Object(w.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){localStorage.getItem("firstlogin")&&function(){var t=Object(i.a)(o.a.mark((function t(){var c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:null},t.next=3,fetch("/user/refresh_token",c).then((function(e){return e.json()}));case 3:a=t.sent,console.log(a);try{e({type:"GET_TOKEN",payload:a.access_token})}catch(r){console.log(r)}case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[c.isLogged,e]),Object(a.useEffect)((function(){!function(){try{console.log("items api request"),e(X()),function(){var t=Object(i.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a.get("/api/items");case 2:c=t.sent,e(q(c));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}catch(t){try{e(H(t.response.data,t.response.status))}catch(c){console.log("Shop-page: "+c)}}}()}),[!c.isLogged]),Object(a.useEffect)((function(){if(t){e(N()),y(t).then((function(t){e(function(e){return{type:g.GET_USER,payload:{user:e,isAdmin:e.role}}}(t))}))}}),[t,e]),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(d.a,{children:[Object(p.jsx)(Re,{}),Object(p.jsx)(ge,{})]})})},Ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,154)).then((function(t){var c=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,n=t.getTTFB;c(e),a(e),r(e),s(e),n(e)}))},Le=c(38),De={user:[],isLogged:!1,isAdmin:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOGIN:return Object(v.a)(Object(v.a)({},e),{},{isLogged:!0});case g.GET_USER:return Object(v.a)(Object(v.a)({},e),{},{user:t.payload.user,isAdmin:t.payload.isAdmin});default:return e}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_TOKEN:return t.payload;default:return e}},Pe=[],Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_ALL_USERS:return t.payload;default:return e}},Me=c(37),ze={items:[],loading:!1},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_ITEMS:return Object(v.a)(Object(v.a)({},e),{},{items:t.payload,loading:!1});case g.ADD_ITEM:return Object(v.a)(Object(v.a)({},e),{},{items:[t.payload].concat(Object(Me.a)(e.items))});case g.DELETE_ITEM:return Object(v.a)(Object(v.a)({},e),{},{items:e.items.filter((function(e){return e._id!==t.payload}))});case g.UPDATE_ITEM:var c=t.payload,a=c.id,r=c.data;return Object(v.a)(Object(v.a)({},e),{},{items:e.items.map((function(e){return e._id===a?r:null}))});case g.ITEMS_LOADING:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});default:return e}},He={orders:[],loading:!1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_ORDERS:return Object(v.a)(Object(v.a)({},e),{},{orders:t.payload,loading:!1});case g.CHECKOUT:return Object(v.a)(Object(v.a)({},e),{},{orders:[t.payload].concat(Object(Me.a)(e.orders))});case g.ORDERS_LOADING:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});default:return e}},Ke={cart:null,loading:!1},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_CART:return Object(v.a)(Object(v.a)({},e),{},{cart:t.payload,loading:!1});case g.ADD_TO_CART:case g.DELETE_FROM_CART:return Object(v.a)(Object(v.a)({},e),{},{cart:t.payload});case g.CART_LOADING:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case g.CLEAR_CART:return Object(v.a)(Object(v.a)({},e),{},{cart:null,loading:!1});default:return e}},Xe={msg:{},status:null,id:null},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.GET_ERRORS:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case g.CLEAR_ERRORS:return{msg:{},status:null,id:null};default:return e}},Je=Object(Le.a)({auth:Fe,token:Ge,users:Ue,item:Be,cart:Ve,order:qe,error:Ye}),Qe=Object(Le.b)(Je,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var We=function(e){var t=e.children;return Object(p.jsx)(w.a,{store:Qe,children:t})};m.a.defaults.baseURL="https://flybuy-ecom-api.herokuapp.com",n.a.render(Object(p.jsx)(r.a.Fragment,{children:Object(p.jsx)(We,{children:Object(p.jsx)(Se,{})})}),document.getElementById("root")),Ie()},60:function(e,t,c){},83:function(e,t,c){}},[[136,1,2]]]);
//# sourceMappingURL=main.3b8f7afc.chunk.js.map